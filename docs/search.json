[
  {
    "objectID": "EDA.html",
    "href": "EDA.html",
    "title": "EDA",
    "section": "",
    "text": "library(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(janitor)\n\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n\nlibrary(ggplot2)\n\nThis project uses the BRFSS 2015 Diabetes Health Indicators dataset.\nEach row represents an individual surveyed, and the goal is to understand how health and lifestyle variables relate to the likelihood of diabetes.\n\ndata &lt;- read_csv(\"data/diabetes_012_health_indicators_BRFSS2015.csv\")\n\nRows: 253680 Columns: 22\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (22): Diabetes_012, HighBP, HighChol, CholCheck, BMI, Smoker, Stroke, He...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nThe database contains data 0,1 and 2 which means : 0 = no diabetes 1 = pre-diabetes 2 = diabetes\nWe construct a binary outcome variable:\n\n0 → No diabetes\n1 → Pre-diabetes or Diabetes\n\nSo making this data binary for our project\n\ndata &lt;- data %&gt;%\n  mutate(\n    Diabetes_binary = ifelse(Diabetes_012 == 0, 0, 1),\n    Diabetes_binary = factor(Diabetes_binary, labels = c(\"No\", \"Yes\"))\n  )\n\nChecking the transformation :\n\ntable(data$Diabetes_012, data$Diabetes_binary)\n\n   \n        No    Yes\n  0 213703      0\n  1      0   4631\n  2      0  35346\n\n\n\ndata &lt;- data %&gt;%\n  mutate(\n    HighBP = factor(HighBP, labels = c(\"No\", \"Yes\")),\n    HighChol = factor(HighChol, labels = c(\"No\", \"Yes\")),\n    CholCheck = factor(CholCheck, labels = c(\"No\", \"Yes\")),\n    Smoker = factor(Smoker, labels = c(\"No\", \"Yes\")),\n    Stroke = factor(Stroke, labels = c(\"No\", \"Yes\")),\n    HeartDiseaseorAttack = factor(HeartDiseaseorAttack, labels = c(\"No\", \"Yes\")),\n    PhysActivity = factor(PhysActivity, labels = c(\"No\", \"Yes\")),\n    Fruits = factor(Fruits, labels = c(\"No\", \"Yes\")),\n    Veggies = factor(Veggies, labels = c(\"No\", \"Yes\")),\n    HvyAlcoholConsump = factor(HvyAlcoholConsump, labels = c(\"No\", \"Yes\")),\n    AnyHealthcare = factor(AnyHealthcare, labels = c(\"No\", \"Yes\")),\n    NoDocbcCost = factor(NoDocbcCost, labels = c(\"No\", \"Yes\")),\n    DiffWalk = factor(DiffWalk, labels = c(\"No\", \"Yes\")),\n    Sex = factor(Sex, labels = c(\"Female\", \"Male\")),\n    GenHlth = factor(GenHlth),\n    Education = factor(Education),\n    Income = factor(Income),\n    Age = as.numeric(Age),   # leave numeric\n    BMI = as.numeric(BMI)    # leave numeric\n  )\n\n\nData Overview\nNumber of rows and columns\n\ndim(data)\n\n[1] 253680     23\n\n\nColumn Names\n\ncolnames(data)\n\n [1] \"Diabetes_012\"         \"HighBP\"               \"HighChol\"            \n [4] \"CholCheck\"            \"BMI\"                  \"Smoker\"              \n [7] \"Stroke\"               \"HeartDiseaseorAttack\" \"PhysActivity\"        \n[10] \"Fruits\"               \"Veggies\"              \"HvyAlcoholConsump\"   \n[13] \"AnyHealthcare\"        \"NoDocbcCost\"          \"GenHlth\"             \n[16] \"MentHlth\"             \"PhysHlth\"             \"DiffWalk\"            \n[19] \"Sex\"                  \"Age\"                  \"Education\"           \n[22] \"Income\"               \"Diabetes_binary\"     \n\n\nGlimpse of data structure\n\nglimpse(data)\n\nRows: 253,680\nColumns: 23\n$ Diabetes_012         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0, 0, 2, 0, 0, 0…\n$ HighBP               &lt;fct&gt; Yes, No, Yes, Yes, Yes, Yes, Yes, Yes, Yes, No, N…\n$ HighChol             &lt;fct&gt; Yes, No, Yes, No, Yes, Yes, No, Yes, Yes, No, No,…\n$ CholCheck            &lt;fct&gt; Yes, No, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, …\n$ BMI                  &lt;dbl&gt; 40, 25, 28, 27, 24, 25, 30, 25, 30, 24, 25, 34, 2…\n$ Smoker               &lt;fct&gt; Yes, Yes, No, No, No, Yes, Yes, Yes, Yes, No, Yes…\n$ Stroke               &lt;fct&gt; No, No, No, No, No, No, No, No, No, No, No, No, N…\n$ HeartDiseaseorAttack &lt;fct&gt; No, No, No, No, No, No, No, No, Yes, No, No, No, …\n$ PhysActivity         &lt;fct&gt; No, Yes, No, Yes, Yes, Yes, No, Yes, No, No, Yes,…\n$ Fruits               &lt;fct&gt; No, No, Yes, Yes, Yes, Yes, No, No, Yes, No, Yes,…\n$ Veggies              &lt;fct&gt; Yes, No, No, Yes, Yes, Yes, No, Yes, Yes, Yes, Ye…\n$ HvyAlcoholConsump    &lt;fct&gt; No, No, No, No, No, No, No, No, No, No, No, No, N…\n$ AnyHealthcare        &lt;fct&gt; Yes, No, Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes, …\n$ NoDocbcCost          &lt;fct&gt; No, Yes, Yes, No, No, No, No, No, No, No, No, No,…\n$ GenHlth              &lt;fct&gt; 5, 3, 5, 2, 2, 2, 3, 3, 5, 2, 3, 3, 3, 4, 4, 2, 3…\n$ MentHlth             &lt;dbl&gt; 18, 0, 30, 0, 3, 0, 0, 0, 30, 0, 0, 0, 0, 0, 30, …\n$ PhysHlth             &lt;dbl&gt; 15, 0, 30, 0, 0, 2, 14, 0, 30, 0, 0, 30, 15, 0, 2…\n$ DiffWalk             &lt;fct&gt; Yes, No, Yes, No, No, No, No, Yes, Yes, No, No, Y…\n$ Sex                  &lt;fct&gt; Female, Female, Female, Female, Female, Male, Fem…\n$ Age                  &lt;dbl&gt; 9, 7, 9, 11, 11, 10, 9, 11, 9, 8, 13, 10, 7, 11, …\n$ Education            &lt;fct&gt; 4, 6, 4, 3, 5, 6, 6, 4, 5, 4, 6, 5, 5, 4, 6, 6, 4…\n$ Income               &lt;fct&gt; 3, 1, 8, 6, 4, 8, 7, 4, 1, 3, 8, 1, 7, 6, 2, 8, 3…\n$ Diabetes_binary      &lt;fct&gt; No, No, No, No, No, No, No, No, Yes, No, Yes, No,…\n\n\nMissingness Check\n\nsum(is.na(data))\n\n[1] 0\n\n\nNarrative: This dataset has either no missing values or minimal missingness due to BRFSS preprocessing. Therefore, no imputation is required at this stage.\n\n\nOutcome Variable Distribution\n\ndata %&gt;%\ncount(Diabetes_binary) %&gt;%\nmutate(prop = n / sum(n))\n\n# A tibble: 2 × 3\n  Diabetes_binary      n  prop\n  &lt;fct&gt;            &lt;int&gt; &lt;dbl&gt;\n1 No              213703 0.842\n2 Yes              39977 0.158\n\nggplot(data, aes(x = Diabetes_binary, fill = Diabetes_binary)) +\ngeom_bar() +\nscale_fill_manual(values = c(\"#4DB6AC\", \"#EF5350\")) +\nlabs(\ntitle = \"Distribution of Diabetes (Binary)\",\nx = \"Diabetes Status\",\ny = \"Count\"\n) +\ntheme_minimal()\n\n\n\n\n\n\n\n\nNarrative: Most individuals do not have diabetes, but the “Yes” class is large enough for stable modeling.\n\n\nBMI Distribution\n\nggplot(data, aes(x = BMI)) +\ngeom_histogram(bins = 40, fill = \"#42A5F5\") +\nlabs(\ntitle = \"BMI Distribution\",\nx = \"BMI\",\ny = \"Count\"\n) +\ntheme_minimal()\n\n\n\n\n\n\n\n\n\n\nDiabetes vs High Blood Pressure\n\ndata %&gt;%\ncount(HighBP, Diabetes_binary) %&gt;%\nggplot(aes(x = HighBP, y = n, fill = Diabetes_binary)) +\ngeom_col(position = \"dodge\") +\nlabs(\ntitle = \"Diabetes vs High Blood Pressure\",\nx = \"High Blood Pressure\",\ny = \"Count\",\nfill = \"Diabetes\"\n) +\ntheme_minimal()\n\n\n\n\n\n\n\n\n\n\nDiabetes vs Smoking\n\ndata %&gt;%\ncount(Smoker, Diabetes_binary) %&gt;%\nggplot(aes(x = Smoker, y = n, fill = Diabetes_binary)) +\ngeom_col(position = \"dodge\") +\nlabs(\ntitle = \"Diabetes vs Smoking\",\nx = \"Smoker\",\ny = \"Count\"\n) +\ntheme_minimal()\n\n\n\n\n\n\n\n\n\n\nCorrelation Among Numeric Variables\n\nnumeric_vars &lt;- data %&gt;%\nselect(BMI, MentHlth, PhysHlth, Age)\n\ncor(numeric_vars)\n\n                 BMI    MentHlth   PhysHlth         Age\nBMI       1.00000000  0.08531016 0.12114111 -0.03661764\nMentHlth  0.08531016  1.00000000 0.35361887 -0.09206802\nPhysHlth  0.12114111  0.35361887 1.00000000  0.09912993\nAge      -0.03661764 -0.09206802 0.09912993  1.00000000\n\n\n\n\nSummary Table for Key Predictors\n\ndata %&gt;%\ntabyl(Diabetes_binary)\n\n Diabetes_binary      n   percent\n              No 213703 0.8424117\n             Yes  39977 0.1575883\n\ndata %&gt;%\nsummarise(\nmean_BMI = mean(BMI),\nmedian_BMI = median(BMI),\nmean_Age = mean(Age)\n)\n\n# A tibble: 1 × 3\n  mean_BMI median_BMI mean_Age\n     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;\n1     28.4         27     8.03\n\n\n\n\nConclusion\nThis EDA highlights several strong relationships between diabetes and predictors such as:\nHigh blood pressure\nHigh cholesterol\nSmoking\nBMI\nLimited physical activity\nSelf-reported general health\nThese patterns will guide model selection and predictor choice for the classification tree and random forest models."
  },
  {
    "objectID": "Modeling.html",
    "href": "Modeling.html",
    "title": "Modeling: Diabetes Prediction",
    "section": "",
    "text": "library(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(tidymodels)\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.4.1 ──\n✔ broom        1.0.10     ✔ rsample      1.3.1 \n✔ dials        1.4.2      ✔ tailor       0.1.0 \n✔ infer        1.0.9      ✔ tune         2.0.1 \n✔ modeldata    1.5.1      ✔ workflows    1.3.0 \n✔ parsnip      1.3.3      ✔ workflowsets 1.1.1 \n✔ recipes      1.3.1      ✔ yardstick    1.3.2 \n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n\nlibrary(janitor)\n\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n\nlibrary(yardstick)\n\ntidymodels_prefer()\ndata &lt;- read_csv(\"data/diabetes_012_health_indicators_BRFSS2015.csv\")\n\nRows: 253680 Columns: 22\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (22): Diabetes_012, HighBP, HighChol, CholCheck, BMI, Smoker, Stroke, He...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message."
  },
  {
    "objectID": "Modeling.html#checking-the-tuning-results",
    "href": "Modeling.html#checking-the-tuning-results",
    "title": "Modeling: Diabetes Prediction",
    "section": "Checking the tuning results",
    "text": "Checking the tuning results\nThis will list the top 5 parameter combinations (lowest log-loss).\n\nshow_best(tree_tuned, metric = \"mn_log_loss\", n = 5)\n\n# A tibble: 5 × 8\n  cost_complexity tree_depth .metric     .estimator  mean     n  std_err .config\n            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;  \n1         0.00001         10 mn_log_loss binary     0.359     5 0.000625 pre0_m…\n2         0.00001          8 mn_log_loss binary     0.364     5 0.000408 pre0_m…\n3         0.0001          10 mn_log_loss binary     0.373     5 0.00202  pre0_m…\n4         0.0001           8 mn_log_loss binary     0.375     5 0.00216  pre0_m…\n5         0.00001          6 mn_log_loss binary     0.382     5 0.00169  pre0_m…\n\n\n\nbest_tree &lt;- select_best(tree_tuned, metric = \"mn_log_loss\")\nbest_tree\n\n# A tibble: 1 × 3\n  cost_complexity tree_depth .config         \n            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;           \n1         0.00001         10 pre0_mod05_post0\n\n\nThis gives you:\nthe best cost_complexity\nthe best tree_depth\nFinalising the workflow\n\nfinal_tree_workflow &lt;- finalize_workflow(tree_workflow, best_tree)\nfinal_tree_fit &lt;- fit(final_tree_workflow, data = train_data)\n\n\ntree_preds &lt;- predict(final_tree_fit, test_data, type = \"prob\") %&gt;%\n  bind_cols(test_data %&gt;% select(Diabetes_binary))\n\nmn_log_loss(tree_preds, truth = Diabetes_binary, .pred_No)\n\n# A tibble: 1 × 3\n  .metric     .estimator .estimate\n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;\n1 mn_log_loss binary         0.359\n\nmn_log_loss(tree_preds, truth = Diabetes_binary, .pred_Yes)\n\n# A tibble: 1 × 3\n  .metric     .estimator .estimate\n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;\n1 mn_log_loss binary          2.13"
  },
  {
    "objectID": "Modeling.html#checking-the-tuning-results-1",
    "href": "Modeling.html#checking-the-tuning-results-1",
    "title": "Modeling: Diabetes Prediction",
    "section": "Checking the tuning results",
    "text": "Checking the tuning results\nTop Random Forest Models\n\nshow_best(rf_tuned, metric = \"mn_log_loss\", n = 5)\n\n# A tibble: 2 × 7\n   mtry .metric     .estimator  mean     n std_err .config        \n  &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;          \n1     5 mn_log_loss binary     0.362     5 0.00223 pre0_mod1_post0\n2    10 mn_log_loss binary     0.455     5 0.00664 pre0_mod2_post0\n\n\nSelecting the best random forest model\n\nbest_rf &lt;- select_best(rf_tuned, metric = \"mn_log_loss\")\nbest_rf\n\n# A tibble: 1 × 2\n   mtry .config        \n  &lt;dbl&gt; &lt;chr&gt;          \n1     5 pre0_mod1_post0\n\n\nFinalising the RF Model\n\nfinal_rf_workflow &lt;- finalize_workflow(rf_workflow, best_rf)\n\n\nfinal_rf_fit &lt;- fit(final_rf_workflow, data = train_data)\n\n\nrf_preds &lt;- predict(final_rf_fit, test_data, type = \"prob\") %&gt;%\n  bind_cols(test_data %&gt;% select(Diabetes_binary))\n\ncolnames(rf_preds)\n\n[1] \".pred_No\"        \".pred_Yes\"       \"Diabetes_binary\"\n\nmn_log_loss(rf_preds, truth = Diabetes_binary, .pred_No)\n\n# A tibble: 1 × 3\n  .metric     .estimator .estimate\n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;\n1 mn_log_loss binary         0.348\n\nmn_log_loss(rf_preds, truth = Diabetes_binary, .pred_Yes)\n\n# A tibble: 1 × 3\n  .metric     .estimator .estimate\n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;\n1 mn_log_loss binary          2.43"
  }
]